"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[345],{2206:function(e,t,r){r.d(t,{X:function(){return c},bZ:function(){return l}});var n=r(7437),o=r(2265),a=r(6061),s=r(9311);let i=(0,a.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=o.forwardRef((e,t)=>{let{className:r,variant:o,...a}=e;return(0,n.jsx)("div",{ref:t,role:"alert",className:(0,s.cn)(i({variant:o}),r),...a})});l.displayName="Alert";let u=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("h5",{ref:t,className:(0,s.cn)("mb-1 font-medium leading-none tracking-tight",r),...o})});u.displayName="AlertTitle";let c=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("text-sm [&_p]:leading-relaxed",r),...o})});c.displayName="AlertDescription"},3023:function(e,t,r){r.d(t,{z:function(){return u}});var n=r(7437),o=r(2265),a=r(7256),s=r(6061),i=r(9311);let l=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=o.forwardRef((e,t)=>{let{className:r,variant:o,size:s,asChild:u=!1,...c}=e,d=u?a.g7:"button";return(0,n.jsx)(d,{className:(0,i.cn)(l({variant:o,size:s,className:r})),ref:t,...c})});u.displayName="Button"},6110:function(e,t,r){r.d(t,{Ol:function(){return i},SZ:function(){return u},Zb:function(){return s},aY:function(){return c},eW:function(){return d},ll:function(){return l}});var n=r(7437),o=r(2265),a=r(9311);let s=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...o})});s.displayName="Card";let i=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...o})});i.displayName="CardHeader";let l=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...o})});l.displayName="CardTitle";let u=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...o})});u.displayName="CardDescription";let c=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...o})});c.displayName="CardContent";let d=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...o})});d.displayName="CardFooter"},7749:function(e,t,r){r.d(t,{X:function(){return l}});var n=r(7437),o=r(2265),a=r(2237),s=r(2442),i=r(9311);let l=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.fC,{ref:t,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...o,children:(0,n.jsx)(a.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,n.jsx)(s.Z,{className:"h-4 w-4"})})})});l.displayName=a.fC.displayName},1908:function(e,t,r){r.d(t,{I:function(){return s}});var n=r(7437),o=r(2265),a=r(9311);let s=o.forwardRef((e,t)=>{let{className:r,type:o,...s}=e;return(0,n.jsx)("input",{type:o,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...s})});s.displayName="Input"},6672:function(e,t,r){r.d(t,{_:function(){return u}});var n=r(7437),o=r(2265),a=r(6743),s=r(6061),i=r(9311);let l=(0,s.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.f,{ref:t,className:(0,i.cn)(l(),r),...o})});u.displayName=a.f.displayName},2621:function(e,t,r){r.d(t,{pm:function(){return f}});var n=r(2265);let o=0,a=new Map,s=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?s(r):e.toasts.forEach(e=>{s(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],u={toasts:[]};function c(e){u=i(u,e),l.forEach(e=>{e(u)})}function d(e){let{...t}=e,r=(o=(o+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||n()}}}),{id:r,dismiss:n,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=n.useState(u);return n.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},4103:function(e,t,r){r.r(t),r.d(t,{AuthProvider:function(){return f},useAuth:function(){return g}});var n=r(7437),o=r(2265),a=r(4033),s=r(4829),i=r(1490),l=r(2601);let u=s.Z.create({baseURL:l.env.NEXT_PUBLIC_API_URL||"/api",headers:{"Content-Type":"application/json"}});u.interceptors.request.use(e=>{let t=i.Z.get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),u.interceptors.response.use(e=>e,e=>{var t;let r="An unexpected error occurred";if(null===(t=e.response)||void 0===t?void 0:t.data){let t=e.response.data;t.detail?r=t.detail:t.message?r=t.message:"string"==typeof t&&(r=t)}else e.message&&(r=e.message);let n=Error(r);return n.name="APIError",Promise.reject(n)});var c={login:async e=>{try{let t=new URLSearchParams;t.append("username",e.email),t.append("password",e.password);let r=await u.post("/auth/login",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});return r.data}catch(e){throw e}},signup:async e=>{try{let t=await u.post("/auth/register",e);return t.data}catch(e){throw e}},logout:async()=>{i.Z.remove("token")},getCurrentUser:async()=>{try{return null}catch(e){throw e}},getAllUsers:async()=>{try{let e=await u.get("/auth/db");if(e.data&&e.data["Hello From: "])return e.data["Hello From: "];return e.data}catch(e){throw e}}};let d=(0,o.createContext)(void 0);function f(e){let{children:t}=e,[r,s]=(0,o.useState)(null),[l,u]=(0,o.useState)(!0),f=(0,a.useRouter)(),g=(0,a.useSearchParams)(),p=()=>{console.log("\uD83D\uDD04 Clearing authentication data..."),i.Z.remove("token"),i.Z.remove("userEmail"),s(null)};(0,o.useEffect)(()=>{console.log("\uD83D\uDD0D AuthProvider: Checking authentication status...");let e=i.Z.get("token"),t=i.Z.get("userEmail");console.log("\uD83C\uDF6A Found cookies:",{hasToken:!!e,userEmail:t?"".concat(t.substring(0,3),"***"):"none"}),e&&t?(console.log("\uD83D\uDD04 Attempting to authenticate with stored credentials..."),c.getAllUsers().then(e=>{console.log("\uD83D\uDC65 Fetched ".concat(e.length," users from API"));let r=e.find(e=>e.email===t);r?(console.log("✅ User found in API, logging in:",r.email),s(r)):(console.log("❌ User not found in API, clearing tokens"),p())}).catch(e=>{console.log("❌ Failed to fetch users, clearing tokens:",e.message),p()}).finally(()=>{u(!1)})):(console.log("\uD83D\uDC64 No authentication found, user not logged in"),u(!1))},[]);let m=async(e,t)=>{try{console.log("\uD83D\uDD10 Attempting login for:",e);let r=await c.login({email:e,password:t});console.log("✅ Login successful, storing credentials"),i.Z.set("token",r.access_token,{expires:30}),i.Z.set("userEmail",e,{expires:30});try{let t=await c.getAllUsers(),r=t.find(t=>t.email===e);r&&(console.log("✅ User data retrieved from API"),s(r))}catch(t){console.log("⚠️ Could not fetch user data, creating basic user object"),s({id:"unknown",email:e,first_name:"",last_name:""})}let n=g.get("from")||"/dashboard";f.push(n)}catch(e){throw console.log("❌ Login failed:",e),e}},h=async(e,t,r,n)=>{try{console.log("\uD83D\uDCDD Attempting signup for:",r),await c.signup({email:r,password:n,first_name:e,last_name:t}),console.log("✅ Signup successful, auto-logging in..."),await m(r,n)}catch(e){throw console.log("❌ Signup failed:",e),e}},v=async()=>{try{console.log("\uD83D\uDEAA Logging out..."),await c.logout(),p(),f.push("/")}catch(e){console.log("⚠️ Logout error, clearing local state anyway:",e),p(),f.push("/")}};return(0,n.jsx)(d.Provider,{value:{user:r,isLoading:l,login:m,signup:h,logout:v,clearAuth:p},children:t})}function g(){let e=(0,o.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9311:function(e,t,r){r.d(t,{cn:function(){return a}});var n=r(7042),o=r(4769);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.m6)((0,n.W)(t))}}}]);